#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<windows.h>
#define TF 500
int main()
{
	int  TLA=0, i, j= 0, TLD= 0, TLN= 0, controle,nota1[TF], nota2[TF];
	char  op, nome[30], vAluno[TF][30],vRA[TF][15], RA[15], vDisciplina[TF][30], cod[15], vCod[TF][30], vRA_mat[TF][30], vCod_mat[TF][30];
	
		printf(" **** SISTEMA ****\n");
	
	do {
		printf("\n\n ----------------------------\n");
		printf("\n Cadastro de Aluno [A]\n");
		printf(" Cadastro de Disciplina [B]\n");
		printf(" Lancar Notas [C]\n");
		printf(" Excluir Aluno [D]\n");
		printf(" Relatorio de Notas [E]\n");
		printf(" Relatorio Alunos Aprovados [F]\n");
		printf(" Relatorio Alunos Reprovados [G]\n");
		printf("\n Digite a opcao abaixo:\n ");
		fflush(stdin);
		scanf("%c",&op);
		op = toupper(op);
		
		printf(" \n----------------------------\n\n");
	
		system("cls");
		switch(op) {
			
			case 'A':
			
				printf(" **** CADASTRO DE ALUNOS ****\n\n");		
				printf("Informe o RA do aluno:\n");
				fflush(stdin);
				gets(RA);
				
				
				i=0;
				
				//BUSCA DO RA
				
				while(i < TLA && strcmp(vRA[i],RA) != 0) 
					i++;
						
				
				
				if(i < TLA) { // ACHOU
				
					printf("\n ** ALUNO JA CADASTRADO **\n");
					printf("RA: %s\n", vRA[i]);
					printf("Aluno: %s\n\n", vAluno[i]);
					
				} else { // NAO ACHOU
					
					printf("Informe o nome do aluno:\n");
					fflush(stdin);
					gets(nome);
					strcpy(vAluno[TLA], nome);
					
					strcpy(vRA[TLA], RA);
						
					TLA++;
				
				}			
				break;


			case 'B':
				
				printf(" **** CADASTRO DE DISCIPLINAS ****\n\n");
				printf("Digite o codigo da disciplina:\n");
				fflush(stdin);
				gets(cod);
				
			
					j= 0;
					
					
					while(j < TLD && strcmp(vCod[j],cod) != 0)
						j++;	
						
						
					if(j == TLD)
					{
						printf("Digite o nome da disciplina:\n");
						fflush(stdin);
						gets(vDisciplina[TLD]);
						strcpy(vCod[TLD], cod);
			 			TLD++;
					}	
					else
					{
						printf(" ** Disciplina Cadastrada **\n");
						printf("Codigo: %s\n",vCod[j]);
						printf("Disciplina: %s\n\n",vDisciplina[j]);
					
					}
					
				break;
				
				
			case 'C':
				printf(" **** LANCAMENTO DE NOTAS ****\n\n");
				printf("Informe o RA:\n");
				fflush(stdin);
				gets(RA);
				
				i=0;
				while(i < TLA && strcmp(vRA[i],RA) != 0) 
					i++;
					
				if(i < TLA) { // ACHOU
				
					printf(" \n**** ALUNO ****\n");
					printf("\nRA: %s\n", vRA[i]);
					printf("Aluno: %s\n\n",vAluno[i]);
				
					printf("Informe o codigo da disciplina:\n");
					fflush(stdin);
					gets(cod);
					
					j=0;
					while(j < TLD && strcmp(vCod[j],cod) != 0)
						j++;
				
					if( j < TLD) {
						
						printf(" \n**** DISCIPLINA ****\n");	
						printf("Codigo: %s\n",vCod[j]);
						printf("Disciplina: %s\n\n",vDisciplina[j]);
						
						i = 0;
						controle = 0; // variável para quebrar a repetição!
						
						while(i < TLN && controle != 1)
						{
							if(strcmp(vRA_mat[i],RA)==0 && strcmp(vCod_mat[i],cod)==0) // naquela posição i do vetor eu achei o RA e o cod da matéria, então nota ja lançada
								controle = 1; // mudo para quebrar condição do while
							else
								i++; // se não achar, acrescento i
						}
							
						if(i < TLN) {
							printf("\n **** NOTA JA CADASTRADA ****\n\n");
							printf("\n **** NOTA 1 : %d ",nota1[i]);
							printf("\n **** NOTA 2 : %d ",nota2[i]);
						}
						else {
							
							printf("Insira a nota do primeiro bimestre:\n");
							scanf("%d",&nota1[TLN]);                         // mudei vetor de notas para int
							
							printf("Insira a nota do segundo bimestre:\n");
							scanf("%d",&nota2[TLN]);
							
							strcpy(vRA_mat[TLN],RA);           // registrando que esse aluno já lancou a nota
							strcpy(vCod_mat[TLN],cod);         // na disciplina
							
							TLN++;
				
						}
					}
					else
						printf(" ** DISCIPLINA NAO ENCONTRADA **\n\n");		
				}
				else
					printf("\n ** ALUNO NAO ENCONTRADO **\n\n");
				
				break;
				
				
			case 'D':
				break;
				
			
			case 'E':
				break;
				
				
			case 'F':
				break;
				
				
			case 'G':
				break;
				
			
		}
	
	
	}while(op != 27);
	

	return 0;
	
}
